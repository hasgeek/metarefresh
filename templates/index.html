{% from "baseframe/components.html" import flash_messages, networkbar with context -%}
{% extends theme("layout.html") %}
{% block titletags -%}
  <title>{% block title %}{{ node.title }}{% endblock %}</title>
  <meta name="DC.title" content="{{ node.title }}"/>
{%- endblock %}
{% block headerbox %}
  <header id="top" class="section1 rounded">
    {% block networkbar %}{{ networkbar(siteid='events', login=false) }}{% endblock %}
    <div id="main-navbar">
      <div class="main-navbar navbar-fixed-top navbar-hidden">
        <ul class="nav" id="main-nav">
          <li><a href="#top"><i class="icon-repeat"></i><br />Meta Refresh</a></li>
          <li><a href="#about"><i class="icon-quote-left"></i><br />About</a></li>
          <li><a href="#speakers"><i class="icon-user"></i><br />Speakers</a></li>
          {#<li><a href="#schedule"><i class="icon-time"></i><br />Schedule</a></li>#}
          <li><a href="#sponsors"><i class="icon-money"></i><br />Sponsors</a></li>
          {#<li><a href="#venue"><i class="icon-map-marker"></i><br />Venue</a></li>#}
          <li><a href="#credits"><i class="icon-certificate"></i><br />Credits</a></li>
        </ul>
      </div>
    </div>
    <div id="page-header" class="container">
      <img src="{{ theme_static('img/logo.svg') }}" onerror="this.onerror = null; this.src='{{ theme_static('img/logo.png') }}';">
      <h2>February 22-23, 2013, <br />MLR Convention Centre, JP Nagar, Bangalore, India</h2>
      <div class="description">
        <a class="ticket-popup btn btn-primary btn-large" href="http://metarefresh.doattend.com/" data-href="http://doattend.com/embed_ticket/25343">
          <big>Buy tickets</big>
          <br />
          <small><del>Rs 5000</del>
          Rs 3000</small>
        </a>
        <p id="cleartrip-offer"><a href="">Cleartrip</a> is offering Rs. 1000 off on travel to Bangalore for Meta Refresh. <br />We will e-mail you details after you buy a ticket.</p>
      </div>
    </div>
  </header>
{% endblock %}
{% block headline %}{% endblock %}
{% block main %}
  <div class="section0 rounded" id="mob-navbar">
    <div class="main-navbar">
    <ul class="nav" id="main-nav">
      <li><a href="#top"><i class="icon-repeat"></i><p>Meta Refresh</p></a></li>
      <li><a href="#about"><i class="icon-quote-left"></i><p>About</p></a></li>
      <li><a href="#speakers"><i class="icon-user"></i><p>Speakers</p></a></li>
      {#<li><a href="#schedule"><i class="icon-time"></i><p>Schedule</p></a></li>#}
      <li><a href="#sponsors"><i class="icon-money"></i><p>Sponsors</p></a></li>
      {#<li><a href="#venue"><i class="icon-map-marker"></i><p>Venue</p></a></li>#}
      <li><a href="#credits"><i class="icon-certificate"></i><p>Credits</p></a></li>
    </ul>
  </div>
  </div>
  <div class="section2 rounded">
    <div id="about" class="container">
      <div class="description">
        {{ node.content }}
      </div>
{#      <div id="social">
        <em>Share with friends</em><br />
        <a href="#" title="Twitter" id="social-icon1">twitter</a>
        <a href="#" title="Google Plus" id="social-icon2">google-plus</a>
        <a href="#" title="Facebook" id="social-icon3">facebook</a>
      </div> #}
    </div>
  </div>
  
  <div class="section3 rounded">
    <div class="container" id="speakers">
      <h1 class="section-heading">Speakers</h1>
      {% include theme("inc/speakers.html") %}
    </div>
  </div>
  <div class="section4 rounded">
    <div class="container" id="speaker-previews">
      {% include theme("inc/previews.html") %}
    </div>
  </div> 
  <div class="section5 rounded">
    <div class="container" id="sponsors">
      <h1 class="section-heading">Friends of Meta Refresh</h1>
      {% include theme("inc/sponsors.html") %}
    </div>
  </div> 
{#  <div class="section6 rounded">
    <div class="container" id="venue">
      <h1 class="section-heading">Venue</h1>
      {% include theme("inc/venue.html") %}
    </div>
  </div> #}
  <div class="section7 rounded">
    <div class="container" id="credits">
      <h1 class="section-heading">Credits</h1>
      {% include theme("inc/credits.html") %}
    </div>
  </div>
{% endblock %}

{% block footerscripts %}

<script>
  $(function() {
    if(Modernizr.touch){
      $(".talk-title a").popover({
        trigger: 'click'
      });
    }
    else{
      $(".talk-title a").popover({
        trigger: 'hover'
      });
    }
  });

  // $(function() {
  //   $(".no-touch .talk-title a").popover({
  //     trigger: 'hover'
  //   });

  //   $(".touch .talk-title a").popover({
  //     trigger: 'click'
  //   });
  // });

  // /// 1 ///
  // var isVisible1 = false;
  // var clickedAway1 = false;

  // $('#talk-title1').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway1 = false
  //         isVisible1 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible1 & clickedAway1)
  //   {
  //     $('#talk-title1').popover('hide')
  //     isVisible1 = clickedAway1 = false
  //   }
  //   else
  //   {
  //     clickedAway1 = true
  //   }
  // });

  // /// 2 ///
  // var isVisible2 = false;
  // var clickedAway2 = false;
  // $('#talk-title2').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway2 = false
  //         isVisible2 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible2 & clickedAway2)
  //   {
  //     $('#talk-title2').popover('hide')
  //     isVisible2 = clickedAway2 = false
  //   }
  //   else
  //   {
  //     clickedAway2 = true
  //   }
  // });

  // /// 3 ///
  // var isVisible3 = false;
  // var clickedAway3 = false;
  // $('#talk-title3').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway3 = false
  //         isVisible3 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible3 & clickedAway3)
  //   {
  //     $('#talk-title3').popover('hide')
  //     isVisible3 = clickedAway3 = false
  //   }
  //   else
  //   {
  //     clickedAway3 = true
  //   }
  // });

  // /// 4 ///
  // var isVisible4 = false;
  // var clickedAway4 = false;
  // $('#talk-title4').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway4 = false
  //         isVisible4 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible4 & clickedAway4)
  //   {
  //     $('#talk-title4').popover('hide')
  //     isVisible4 = clickedAway4 = false
  //   }
  //   else
  //   {
  //     clickedAway4 = true
  //   }
  // });

  // /// 5 ///
  // var isVisible5 = false;
  // var clickedAway5 = false;
  // $('#talk-title5').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway5 = false
  //         isVisible5 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible5 & clickedAway5)
  //   {
  //     $('#talk-title5').popover('hide')
  //     isVisible5 = clickedAway5 = false
  //   }
  //   else
  //   {
  //     clickedAway5 = true
  //   }
  // });

  // /// 6 ///
  // var isVisible6 = false;
  // var clickedAway6 = false;
  // $('#talk-title6').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway6 = false
  //         isVisible6 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible6 & clickedAway6)
  //   {
  //     $('#talk-title6').popover('hide')
  //     isVisible6 = clickedAway6 = false
  //   }
  //   else
  //   {
  //     clickedAway6 = true
  //   }
  // });
  
  // /// 7 ///
  // var isVisible7 = false;
  // var clickedAway7 = false;
  // $('#talk-title7').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway7 = false
  //         isVisible7 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible7 & clickedAway7)
  //   {
  //     $('#talk-title7').popover('hide')
  //     isVisible7 = clickedAway7 = false
  //   }
  //   else
  //   {
  //     clickedAway7 = true
  //   }
  // });

  // /// 8 ///
  // var isVisible8 = false;
  // var clickedAway8 = false;
  // $('#talk-title8').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway8 = false
  //         isVisible8 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible8 & clickedAway8)
  //   {
  //     $('#talk-title8').popover('hide')
  //     isVisible8 = clickedAway8 = false
  //   }
  //   else
  //   {
  //     clickedAway8 = true
  //   }
  // });

  // /// 9 ///
  // var isVisible9 = false;
  // var clickedAway9 = false;
  // $('#talk-title9').popover({
  //         html: true,
  //         trigger: 'manual'
  //     }).click(function(e) {
  //         $(this).popover('show');
  //         clickedAway9 = false
  //         isVisible9 = true
  //         e.preventDefault()
  //     });

  // $(document).click(function(e) {
  //   if(isVisible9 & clickedAway9)
  //   {
  //     $('#talk-title9').popover('hide')
  //     isVisible9 = clickedAway9 = false
  //   }
  //   else
  //   {
  //     clickedAway9 = true
  //   }
  // });
</script>
<script type="text/javascript">
  $(document).ready(function(){
    
    $(".no-touch .ticket-popup").colorbox({iframe:true, width:"80%", height:"80%", href: $(".ticket-popup").attr("data-href")});
    
  });
</script>
<script type="text/javascript">

  $(function() {
    // fixed nav-bar transition code
    // adapted from twitter bootstrap docs' sub-nav
    var $win = $(window)
      , $nav = $('.main-navbar')
      , navTop = $nav.length && $nav.offset().top + 610
      , isFixed = 0;
    
    var processScroll = function () {
      var scrollTop = $win.scrollTop();
      if (scrollTop >= navTop && !isFixed) {
        isFixed = 1;
        $nav.removeClass('navbar-hidden');
      } else if (scrollTop <= navTop && isFixed) {
        isFixed = 0;
        $nav.addClass('navbar-hidden');
      };
    };
    
    processScroll();
    
    $win.on('scroll', processScroll);
    
    // smooth scroll nav links
    $('a', $nav).smoothScroll({
        offset: -80
      , speed: 900
    });

  });
</script>

{% endblock %}
